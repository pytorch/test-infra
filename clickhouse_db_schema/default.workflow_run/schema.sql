CREATE TABLE default.workflow_run
(
    `actor` Tuple(
        avatar_url String,
        events_url String,
        followers_url String,
        following_url String,
        gists_url String,
        gravatar_id String,
        html_url String,
        id Int64,
        login String,
        node_id String,
        organizations_url String,
        received_events_url String,
        repos_url String,
        site_admin Bool,
        starred_url String,
        subscriptions_url String,
        type String,
        url String),
    `artifacts_url` String,
    `cancel_url` String,
    `check_suite_id` Int64,
    `check_suite_node_id` String,
    `check_suite_url` String,
    `conclusion` String,
    `created_at` DateTime64(9),
    `display_title` String,
    `dynamoKey` String,
    `event` String,
    `head_branch` String,
    `head_commit` Tuple(
        author Tuple(
            email String,
            name String),
        committer Tuple(
            email String,
            name String),
        id String,
        message String,
        timestamp DateTime64(9),
        tree_id String) COMMENT 'Contains commit info including id (SHA) that matches workflow_job.head_sha',
    `head_repository` Tuple(
        archive_url String,
        assignees_url String,
        blobs_url String,
        branches_url String,
        collaborators_url String,
        comments_url String,
        commits_url String,
        compare_url String,
        contents_url String,
        contributors_url String,
        deployments_url String,
        description String,
        downloads_url String,
        events_url String,
        fork Bool,
        forks_url String,
        full_name String,
        git_commits_url String,
        git_refs_url String,
        git_tags_url String,
        hooks_url String,
        html_url String,
        id Int64,
        issue_comment_url String,
        issue_events_url String,
        issues_url String,
        keys_url String,
        labels_url String,
        languages_url String,
        merges_url String,
        milestones_url String,
        name String,
        node_id String,
        notifications_url String,
        owner Tuple(
            avatar_url String,
            events_url String,
            followers_url String,
            following_url String,
            gists_url String,
            gravatar_id String,
            html_url String,
            id Int64,
            login String,
            node_id String,
            organizations_url String,
            received_events_url String,
            repos_url String,
            site_admin Bool,
            starred_url String,
            subscriptions_url String,
            type String,
            url String),
        private Bool,
        pulls_url String,
        releases_url String,
        stargazers_url String,
        statuses_url String,
        subscribers_url String,
        subscription_url String,
        tags_url String,
        teams_url String,
        trees_url String,
        url String),
    `head_sha` String,
    `html_url` String,
    `id` Int64,
    `jobs_url` String,
    `logs_url` String,
    `name` String,
    `node_id` String,
    `path` String,
    `previous_attempt_url` String,
    `pull_requests` Array(Tuple(
        base Tuple(
            ref String,
            repo Tuple(
                id Int64,
                name String,
                url String),
            sha String),
        head Tuple(
            ref String,
            repo Tuple(
                id Int64,
                name String,
                url String),
            sha String),
        id Int64,
        number Int64,
        url String)),
    `referenced_workflows` Array(Tuple(
        path String,
        ref String,
        sha String)),
    `repository` Tuple(
        archive_url String,
        assignees_url String,
        blobs_url String,
        branches_url String,
        collaborators_url String,
        comments_url String,
        commits_url String,
        compare_url String,
        contents_url String,
        contributors_url String,
        deployments_url String,
        description String,
        downloads_url String,
        events_url String,
        fork Bool,
        forks_url String,
        full_name String,
        git_commits_url String,
        git_refs_url String,
        git_tags_url String,
        hooks_url String,
        html_url String,
        id Int64,
        issue_comment_url String,
        issue_events_url String,
        issues_url String,
        keys_url String,
        labels_url String,
        languages_url String,
        merges_url String,
        milestones_url String,
        name String,
        node_id String,
        notifications_url String,
        owner Tuple(
            avatar_url String,
            events_url String,
            followers_url String,
            following_url String,
            gists_url String,
            gravatar_id String,
            html_url String,
            id Int64,
            login String,
            node_id String,
            organizations_url String,
            received_events_url String,
            repos_url String,
            site_admin Bool,
            starred_url String,
            subscriptions_url String,
            type String,
            url String),
        private Bool,
        pulls_url String,
        releases_url String,
        stargazers_url String,
        statuses_url String,
        subscribers_url String,
        subscription_url String,
        tags_url String,
        teams_url String,
        trees_url String,
        url String),
    `rerun_url` String,
    `run_attempt` Int64,
    `run_number` Int64,
    `run_started_at` DateTime64(9),
    `status` String,
    `triggering_actor` Tuple(
        avatar_url String,
        events_url String,
        followers_url String,
        following_url String,
        gists_url String,
        gravatar_id String,
        html_url String,
        id Int64,
        login String,
        node_id String,
        organizations_url String,
        received_events_url String,
        repos_url String,
        site_admin Bool,
        starred_url String,
        subscriptions_url String,
        type String,
        url String),
    `updated_at` DateTime64(9),
    `url` String,
    `workflow_id` Int64,
    `workflow_url` String,
    `_inserted_at` DateTime MATERIALIZED now(),
    INDEX status_index status TYPE bloom_filter GRANULARITY 1
)
ENGINE = SharedReplacingMergeTree('/clickhouse/tables/{uuid}/{shard}', '{replica}')
ORDER BY (id, dynamoKey)
SETTINGS index_granularity = 8192

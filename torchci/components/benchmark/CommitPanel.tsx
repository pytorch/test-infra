import { Stack, Typography } from "@mui/material";
import { SHA_DISPLAY_LENGTH } from "components/benchmark/common";
import { BranchAndCommit } from "lib/types";
import { ReactNode } from "react";

export function CommitPanel({
  repoName,
  lBranchAndCommit,
  rBranchAndCommit,
  workflowName,
  children,
}: {
  repoName: string;
  lBranchAndCommit: BranchAndCommit;
  rBranchAndCommit: BranchAndCommit;
  workflowName: string;
  children: ReactNode;
}) {
  return (
    <Stack direction="row" spacing={2} sx={{ mb: 2 }}>
      {repoName !== "vllm-project/vllm" && (
        <Typography fontSize={"1rem"} fontStyle={"italic"}>
          *This report was generated by CI running on {repoName}{" "}
          {lBranchAndCommit.branch} branch at commit{" "}
          <a
            href={`/${repoName}/commit/${lBranchAndCommit.commit}#${workflowName}`}
          >
            {lBranchAndCommit.commit.substring(0, SHA_DISPLAY_LENGTH)}
          </a>{" "}
          comparing with {rBranchAndCommit.branch} branch at commit{" "}
          <a
            href={`/${repoName}/commit/${rBranchAndCommit.commit}#${workflowName}`}
          >
            {rBranchAndCommit.commit.substring(0, SHA_DISPLAY_LENGTH)}
          </a>
          . {children}
        </Typography>
      )}
      {repoName === "vllm-project/vllm" && (
        <Typography fontSize={"1rem"} fontStyle={"italic"}>
          This is vLLM v1 dashboard, please refer to{" "}
          <a
            href={
              "https://simon-mo-workspace.observablehq.cloud/vllm-dashboard-v0/perf"
            }
          >
            v0 dashboard
          </a>{" "}
          for the information about how the benchmark is setup
        </Typography>
      )}
    </Stack>
  );
}

# Week of 2025-10-27 to 2025-11-03 (40)

### Auto Revert (3)

- [Revert "Add min/max support for barebones uint types (#166813)"](https://github.com/pytorch/pytorch/commit/3eddf049221fc04c2ac9d4af53c00305484ef325)
  - Reverted automatically by pytorch's autorevert, to avoid this behaviour add the tag autorevert: disable ([comment](https://github.com/pytorch/pytorch/pull/166813#issuecomment-3478450413))
- [Revert "Remove setup-env instructions; it's confusing (#166749)"](https://github.com/pytorch/pytorch/commit/60333de85dec845d6a0e651764c16a730a27828d)
  - Reverted automatically by pytorch's autorevert, to avoid this behaviour add the tag autorevert: disable ([comment](https://github.com/pytorch/pytorch/pull/166749#issuecomment-3475481831))
- [Revert "[BE][Typing][Dynamo] Type misc files in `torch/_dynamo/variables/` (#166569)"](https://github.com/pytorch/pytorch/commit/7d39401fa07eb2f7782d8f234aa19f8b2abff481)
  - Reverted automatically by pytorch's autorevert, to avoid this behaviour add the tag autorevert: disable ([comment](https://github.com/pytorch/pytorch/pull/166569#issuecomment-3471180280))

### GHFirst (8)

- [Revert "[xpu][feature] Integrate OneDNN SDPA training forward/backward into XPU OVERRIDEABLE Backend (#162454)"](https://github.com/pytorch/pytorch/commit/2699f5410b6802277db724f145c281814d6c9ac4)
  - internal build failure ([comment](https://github.com/pytorch/pytorch/pull/162454#issuecomment-3475009089))
- [Revert "Add CUDA MXFP4 scaled mm support via. FBGEMM (#166526)"](https://github.com/pytorch/pytorch/commit/93a70c717a5636505da0b4ccfbca0e111c88c6a8)
  - Failing internal test ([comment](https://github.com/pytorch/pytorch/pull/166526#issuecomment-3474907536))
- [Revert "[pytree] add `treespec_{leaf,tuple,dict}` functions for args_spec modification (#160843)"](https://github.com/pytorch/pytorch/commit/85b85f6c2c7e6ca98abf9d9a38410d4b5703d64a)
  - failing internal builds ([comment](https://github.com/pytorch/pytorch/pull/160843#issuecomment-3474354428))
- [Revert "Make PT2 compile backprop through custom op without autograd key a hard error (#166367)"](https://github.com/pytorch/pytorch/commit/5bcfdae71da2f405a89bace6b09d616107cc3965)
  - internal build failures ([comment](https://github.com/pytorch/pytorch/pull/166367#issuecomment-3473150269))
- [Revert "address DDE in matmul decomp (#166541)"](https://github.com/pytorch/pytorch/commit/8f40a0c634a65246889b478b7f14da7a448174a9)
  - breaks internal test ([comment](https://github.com/pytorch/pytorch/pull/166541#issuecomment-3469382334))
- [Revert "shrink_group implementation to expose ncclCommShrink API (#164518)"](https://github.com/pytorch/pytorch/commit/694d205143b03cb26626cb86ecb399df6d5e3dd8)
  - breaks internal builds Error: from logging_utils import ( ModuleNotFoundError: No module named 'logging_utils' ([comment](https://github.com/pytorch/pytorch/pull/164518#issuecomment-3469308568))
- [Revert "Fix comparing inductor actual strides vs bw graph for activations should not throw DDE.  (#166277)"](https://github.com/pytorch/pytorch/commit/3f1824742cac2ffb9a3afd90953c492c6c7f2f50)
  - Breaks internal executorch tests ([comment](https://github.com/pytorch/pytorch/pull/166277#issuecomment-3468696623))
- [Revert "[Inductor] Naive foreach autotune support (#162053)"](https://github.com/pytorch/pytorch/commit/7379972cc0e8a4b4d88b4bea5c8be0aeffdb076a)
  - Compile time regression ([comment](https://github.com/pytorch/pytorch/pull/162053#issuecomment-3458252331))

### Landrace (1)

- [Revert "[BE][Typing][Dynamo] Type misc files in `torch/_dynamo/variables/` (#166569)"](https://github.com/pytorch/pytorch/commit/fcc10635660ceb619f78d06eaaa8b3c0bdd52ab8)
  - Lintrunner not fixed due to race condition at landing ([comment](https://github.com/pytorch/pytorch/pull/166569#issuecomment-3474012637))

### Not through pytorchbot (1)

- [Revert "[PyTorch] Improve aarch64 performance of bfloat16 ops (#166028)"](https://github.com/pytorch/pytorch/commit/2c9f877fa71c90a1313deeda4b4486d37e72a8a9)

### No Signal (25)

- [Revert "Fix: list index out of range with softmax when using 0 dim (#166547)"](https://github.com/pytorch/pytorch/commit/5e05a0ae99c320bc570a3a42c5fcd6bbf2b2e9b4)
  - Fail: test/test_torchfuzz_repros.py::TestFuzzerCompileIssues::test_fuzzer_issue_163971 [GH job link](https://github.com/pytorch/pytorch/actions/runs/19008635308/job/54286552036) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/0674e0a0f14775f920296e9dfb8b61e4960bf99d) ([comment](https://github.com/pytorch/pytorch/pull/166547#issuecomment-3477962809))
- [Revert "Make PT2 compile backprop through custom op without autograd key a hard error (#166367)"](https://github.com/pytorch/pytorch/commit/82fafb3304f8baffdb2d54578926d8bb4aba621c)
  - backends/xnnpack/test/recipes/test_xnnpack_recipes.py::TestXnnpackRecipes::test_all_models_with_recipes [GH job link](https://github.com/pytorch/pytorch/actions/runs/18999845549/job/54266149620) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/84776e13744db6d59b41a063bb8714e2bffe7a06) ([comment](https://github.com/pytorch/pytorch/pull/166367#issuecomment-3476757660))
- [Revert "Avoid DDE in narrow with unbacked start (#166361)"](https://github.com/pytorch/pytorch/commit/13549e0e105291721f6f80ceb8f520ca272b971d)
  - examples/models/llama/tests/test_export_llama_lib.py::ExportLlamaLibTest::test_has_expected_ops_and_op_counts [GH job link](https://github.com/pytorch/pytorch/actions/runs/18993202115/job/54257916041) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/1aef88c72d3aef629b20e97a188c9dc4bab46a1a) ([comment](https://github.com/pytorch/pytorch/pull/166361#issuecomment-3476752974))
- [Revert "[BE] Move GreenContext implementation details to cpp (#166462)"](https://github.com/pytorch/pytorch/commit/4e8ba37ce3320cac033019131b817b4aca29699b)
  - Sorry, Reverting. Failure: test/test_matmul_cuda.py::TestMatmulCudaCUDA::test_greencontext_carveout_cuda [GH job link](https://github.com/pytorch/pytorch/actions/runs/18962393091/job/54154156892) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/85b035ca9c230199d91ff86d362def01ad36dc67) ([comment](https://github.com/pytorch/pytorch/pull/166462#issuecomment-3473060299))
- [Revert "[GraphPartition] cache get_free_symbol_uses (#166338)"](https://github.com/pytorch/pytorch/commit/26534e9809eb2f7cd804fde5152cdd13dda2293f)
  - Failure: test/nn/test_convolution.py::TestConvolutionNN::test_conv3d_overflow_values [GH job link](https://github.com/pytorch/pytorch/actions/runs/18961173726/job/54149112920) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/a6b1ef17173f56ba93ac97ff4384fa4060b5e41e) ([comment](https://github.com/pytorch/pytorch/pull/166338#issuecomment-3472980329))
- [Revert "Fix torch.full with dynamic tensor fill_value in torch.compile (#166554)"](https://github.com/pytorch/pytorch/commit/657f8c3e21bd8901dd8ce79ca9a54a45b27f604f)
  - Failure: test/nn/test_pooling.py::TestPoolingNNDeviceTypeCPU::test_max_pool_nan_inf_cpu_float32 [GH job link](https://github.com/pytorch/pytorch/actions/runs/18959368975/job/54144148546) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/32066772b3dee643b1657b8957f32b5ac8b1390a) ([comment](https://github.com/pytorch/pytorch/pull/166554#issuecomment-3472976911))
- [Revert "[user-streams] Fix stream graph output semantics (#164819)"](https://github.com/pytorch/pytorch/commit/0a3ac47c0a36d7ed619e6577294648a7c14b1ae1)
  - breaks CI ([comment](https://github.com/pytorch/pytorch/pull/164819#issuecomment-3469018283))
- [Revert "[user-streams] Add current stream source (#165211)"](https://github.com/pytorch/pytorch/commit/ad02bd13dfa017f69def846b265a566c4ec5cb3f)
  - failure: test/test_python_dispatch.py::TestPythonDispatch::test_return_stream [GH job link](https://github.com/pytorch/pytorch/actions/runs/18942517662/job/54086481693) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/7563f61cc8a40a5ba21a498a2d98895b4eec3f39) ([comment](https://github.com/pytorch/pytorch/pull/165211#issuecomment-3468332362))
- [Revert "[triton][sigmoid] Fix kernel cache and serialization issue for triton sigmoid + CUDA kernel bug (#166568)"](https://github.com/pytorch/pytorch/commit/fa8e073a4e17f12e7e4bb0b26471179d2ca57471)
  - Failed test/test_extension_utils.py::TestExtensionUtils::test_external_module_register_with_renamed_backend [GH job link](https://github.com/pytorch/pytorch/actions/runs/18931754443/job/54050880312) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/d46d8d6f54b15ded4f2483c7bde31be124281ab8) ([comment](https://github.com/pytorch/pytorch/pull/166568#issuecomment-3468008894))
- [Revert "[user-streams] Track symbolic current stream (#165212)"](https://github.com/pytorch/pytorch/commit/95b55347730b071d0b79df5ddd477db9c7f91fe4)
  - test/test_rename_privateuse1_to_existing_device.py::TestRenamePrivateuseoneToExistingBackend::test_external_module_register_with_existing_backend [GH job link](https://github.com/pytorch/pytorch/actions/runs/18930365446/job/54046768884) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/a5335263d32b5be2b2647661334d81225c3cc3fc) ([comment](https://github.com/pytorch/pytorch/pull/165212#issuecomment-3467968796))
- [Revert "[user-streams] Handle returning the current stream with/without device index (#165356)"](https://github.com/pytorch/pytorch/commit/9ee1afbf66a6533c712956a3ba5e8f60c5875a74)
  - test/test_rename_privateuse1_to_existing_device.py::TestRenamePrivateuseoneToExistingBackend::test_external_module_register_with_existing_backend [GH job link](https://github.com/pytorch/pytorch/actions/runs/18930365446/job/54046768884) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/a5335263d32b5be2b2647661334d81225c3cc3fc) ([comment](https://github.com/pytorch/pytorch/pull/165356#issuecomment-3467967061))
- [Revert "[2/N] Add strict parameter to Python zip calls  (#166257)"](https://github.com/pytorch/pytorch/commit/f60751024ecac57840a2d25132d0c1562351e66e)
  - Failing: test/distributed/fsdp/test_fsdp_mixed_precision.py::TestFSDPTrainEval::test_train_ema_eval_flow [GH job link](https://github.com/pytorch/pytorch/actions/runs/18934047991/job/54057218160) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/39e5cdddf7e57881c52473d1288a66f0222527e1) ([comment](https://github.com/pytorch/pytorch/pull/166257#issuecomment-3467955332))
- [Revert "[pytree] add `treespec_{leaf,tuple,dict}` functions for args_spec modification (#160843)"](https://github.com/pytorch/pytorch/commit/972030fe2ef0a7500afb7acb86a5f971c30536b9)
  - failing internal torchrec test' ([comment](https://github.com/pytorch/pytorch/pull/160843#issuecomment-3464647878))
- [Revert "[dynamo][guards] 1/N Guard selectively for DTensor (#165824)"](https://github.com/pytorch/pytorch/commit/d7040e6d7515cea485824d2b810bea94e5958dea)
  - internal job failed ([comment](https://github.com/pytorch/pytorch/pull/165824#issuecomment-3462667536))
- [Revert "[ROCm] Enable group gemm through CK (#166334)"](https://github.com/pytorch/pytorch/commit/35f3572fa483a8edb101d5765564e1ae274f3d45)
  - Internal build failures ([comment](https://github.com/pytorch/pytorch/pull/166334#issuecomment-3462640668))
- [Revert "[user-streams] Make device-agnostic streams weakref compatible (#164304)"](https://github.com/pytorch/pytorch/commit/5fd1d41e62ce4436c2bb08c7f4702df0021e2c62)
  - Breaks periodic: test/dynamo/test_streams.py::TestStreams::test_stream_weakref [GH job link](https://github.com/pytorch/pytorch/actions/runs/18909552619/job/53979171605) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/cde81e92b95eee9af2879c9c75f7b03699ca72ad) ([comment](https://github.com/pytorch/pytorch/pull/164304#issuecomment-3462489278))
- [Revert "`nn.Linear`: nD contiguous input + bias -- dispatch to addmm also when weight is sparse (#166071)"](https://github.com/pytorch/pytorch/commit/c594950e867e420a6086190a88e4b8fbd687af91)
  - Multiple CI breakages: test/profiler/test_profiler_tree.py::TestProfilerTree::test_profiler_experimental_tree_with_stack_and_modules [GH job link](https://github.com/pytorch/pytorch/actions/runs/18909087335/job/53976915830) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/467c21ad9ae4133c20a3c098a0355e9ac20d48aa) ([comment](https://github.com/pytorch/pytorch/pull/166071#issuecomment-3462458968))
- [Revert "[User-streams] Make torch.Event weakref compatible (#164522)"](https://github.com/pytorch/pytorch/commit/5cdbcb52334222d1a2667dabd6da993d1e9ddc93)
  - Breaks periodic: test/dynamo/test_streams.py::TestStreams::test_stream_weakref [GH job link](https://github.com/pytorch/pytorch/actions/runs/18909552619/job/53979171605) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/cde81e92b95eee9af2879c9c75f7b03699ca72ad) ([comment](https://github.com/pytorch/pytorch/pull/164522#issuecomment-3462450571))
- [Revert "[BE] Move GreenContext implementation details to cpp (#166462)"](https://github.com/pytorch/pytorch/commit/5e7272b60a5d7203fd1d048ecac6f202526cac63)
  - multiple internal build failures ([comment](https://github.com/pytorch/pytorch/pull/166462#issuecomment-3461145801))
- [Revert "[1/N] Remove unused loop variables (#166258)"](https://github.com/pytorch/pytorch/commit/1dd6b76914397d466a7d9bfff551b6d8299fdce4)
  - breaks test/distributed/test_serialization.py::TestSerialization::test_weights_only [GH job link](https://github.com/pytorch/pytorch/actions/runs/18894311802/job/53929321703) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/76b2c37045e52540ec51e967aa7b6436a6b9b174) ([comment](https://github.com/pytorch/pytorch/pull/166258#issuecomment-3460964612))
- [Revert "[cuDNN] Smoke-test runtime cuDNN version matches compile time version in CI (#165922)"](https://github.com/pytorch/pytorch/commit/a4a0378e6bb8afd774e4e253304cf3bf9d7e188a)
  - cudnn update started to fail, see https://github.com/pytorch/pytorch/pull/165913#issuecomment-3457293475 ([comment](https://github.com/pytorch/pytorch/pull/165922#issuecomment-3457389406))
- [Revert "Update cuDNN 9.10.2 in Manylinux 2.28 Docker files (#165913)"](https://github.com/pytorch/pytorch/commit/0eacd934bc1c1bee002fcd084300d596d789d166)
  - I think something here is causing CI tests to segfault at exit on cuda, ex [GH job link](https://github.com/pytorch/pytorch/actions/runs/18857880394/job/53811917713) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/9a91486e453f300804c7031d0e904b0e2af7d802) says no tests failed but it segfaulted afterwards.  I can't tell if it's because of this change, or an unpinned dependency in docker that got triggered by this.  Note to self, would have been bad TD except trunk didn't run either ([comment](https://github.com/pytorch/pytorch/pull/165913#issuecomment-3457293475))
- [Revert "[inductor][choices] lookup table choices 1/3 (#164978)"](https://github.com/pytorch/pytorch/commit/110efe4df4759006ce5aad4ae1b87d93dcf33c3b)
  - failing internal test on newly added tests: Test when there's no lookup table entry with different autotune modes ([comment](https://github.com/pytorch/pytorch/pull/164978#issuecomment-3456400126))
- [Revert "[CD] Upgrade to CUDA 13.0.2 for nightly binaries (#165470)"](https://github.com/pytorch/pytorch/commit/74336f8c77f1a906314c274e43239306c8077e90)
  - Sorry reverting for now, to restore trunk health ([comment](https://github.com/pytorch/pytorch/pull/165470#issuecomment-3454166879))
- [Revert "Simplify the CUPTI  CMake check for kineto (#161370)"](https://github.com/pytorch/pytorch/commit/a988510c3396a668e92801c61b93f7b06219ad0e)
  - Sorry this is failing libtorch nightly builds [pytorch/pytorch/actions/runs/18800131287/job/53653414136](https://github.com/pytorch/pytorch/actions/runs/18800131287/job/53653414136) ([comment](https://github.com/pytorch/pytorch/pull/161370#issuecomment-3452400982))

### Weird (2)

- [Revert "bwd pass (#164504)"](https://github.com/pytorch/pytorch/commit/d6d6fa26f540c10c57ac80547a9475e9f4c201f2)
  - CI had been clean for both cuda and rocm before merge, broke post merge? ([comment](https://github.com/pytorch/pytorch/pull/164504#issuecomment-3462116676))
- [Revert "[Pytorch] Update Kineto Submodule (#166317)"](https://github.com/pytorch/pytorch/commit/1fdef664a5dffc3bd3d9eba9d78ed458a5f9dbcb)
  - ROCm CI was clean, but post-merge ROCm failures showed up ([comment](https://github.com/pytorch/pytorch/pull/166317#issuecomment-3458665809))
